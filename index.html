<!DOCTYPE HTML PUBLIC>
<html>
<head>
  <title>Parser Test</title>
  <script src="Parse.js" type="text/javascript"></script>
  <script src="Check.js" type="text/javascript"></script>
  <script src="Derivate.js" type="text/javascript"></script>
  <script src="DisjointSet.js" type="text/javascript"></script>
  <script src="Simplify.js" type="text/javascript"></script>
  <script src="Format.js" type="text/javascript"></script>
  <script type="text/javascript">
    onInputChange = function() {
      var input = document.getElementById('input'),
        result = document.getElementById('result'),
        simp = document.getElementById('simp'),
        ast, dx, dy, dxy;
      try {
        ast = parseExp(input.value);
        checkExp(ast);
        ast = simplifyExp(ast);
        simp.innerHTML = '<i>f</i> = ' + formatExp(ast, true);
        try {
          dx = derivExp(ast, 'x');
          dx = simplifyExp(dx);
          dy = derivExp(ast, 'y');
          dy = simplifyExp(dy);
          dxy = simplifyExp(derivExp(dx, 'y'));
          result.innerHTML = '∂<i>f</i>/∂<i>x</i> = ' + formatExp(dx, true) + '<br/>' +
            '∂<i>f</i>/∂<i>y</i> = ' + formatExp(dy, true) + '<br/>' +
            '∂<sup>2</sup><i>f</i>/∂<i>x</i>∂<i>y</i> = ' + formatExp(dxy, true) + '<br/>';
        } catch (e) {
          result.innerHTML = '<span style="color:red">' + e + '</span>';
        }
      } catch (e) {
        simp.innerHTML = '<span style="color:red">' + e + '</span>';
        result.innerHTML = '∂<i>f</i>/∂<i>x</i> = <br/>' +
          '∂<i>f</i>/∂<i>y</i> = <br/>' +
          '∂<sup>2</sup><i>f</i>/∂<i>x</i>∂<i>y</i> = <br/>';
      }
    }
  </script>
  <style>
    .math {
      width: 400px;
      height: 120px;
      border: 1px solid gray;
      padding: 7px;
    }

    .math-inline {
      line-height: 22px;
    }

  </style>
</head>
<body>
<div class="math-inline">
  <i>f</i> =
</div>
<textarea id="input" class="math" onkeyup="onInputChange()"></textarea>
<br/>
Simplified:
<div id="simp" class="math"></div>

Partial derivative:
<div id="result" class="math"></div>
</body>
</html>